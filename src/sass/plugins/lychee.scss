@layer components {
  // Profile Icon
  #attachments_form.lychee_profile_icon.lychee_profile_icon .preview-avatar {
    @apply mr-2
  }

  #attachments_form.lychee_profile_icon.lychee_profile_icon .add_attachment {
    @apply inline-flex flex-col
  }

  #attachments_form.lychee_profile_icon.lychee_profile_icon .add_attachment input[type="file"] {
    @apply w-full
  }


  // Lychee Project View
  #favorite-project-wrapper > h3 {
    @apply mt-4
  }

  .favorite-project-container {
    @apply w-full
  }

  h3 .tree-expander-expanded, table.favorite-projects tr.project td.name .tree-expander-expanded {
    background-image: url(images/expand_more_default.svg);
  }

  h3 .tree-expander-collapsed, table.favorite-projects tr.project td.name .tree-expander-collapsed {
    background-image: url(images/chevron_right_default.svg);
  }

  #favorite-project-wrapper + #query_form h2 {
    @apply text-base text-text-default font-bold mt-3 mb-2 p-0
  }

  // Lychee Actual Date
  #actual_dates_area {
    @apply mt-2
  }


  // LRM
  .controller-resource_management {
    #main.nosidebar {
      @apply ml-0
    }

    .lrm-table .header-row th,
    .lrm-table tbody th {
      border-top: 1px solid gray;
    }

    .lrm-table .header-row th:not(:first-child) {
      border-right: 1px solid gray;
    }

    .lrm-table tbody td {
      border-top: 1px solid gray;
      border-right: 1px solid gray;
    }
  }


  // LPR 共通
  .controller-project_report_overview {
    #main.nosidebar {
      @apply ml-0
    }

    #setting_buttons a ~ a {
      @apply ml-2
    }

    #project_report_windowed_buttons span ~ span {
      @apply ml-2
    }

    #project_report_full_screen_buttons span ~ span {
      @apply ml-2
    }

    #icon-full-screen {
      @apply text-text-link
    }

    .icon-setting {
      background-image: url(images/settings_default.svg);
    }

    .icon-full-screen-start {
      background-image: url(images/fullscreen_success.svg);
    }

    .icon-full-screen-exit {
      background-image: url(images/close_fullscreen_default.svg);
    }
  }

  // LPR 共通 カスタムクエリの作成
  .controller-project_report_queries {
    #content > h3 {
      @apply mt-4
    }
  }

  // LPR 固有
  .controller-project_reports {
    #project-report a.icon-settings,
    #project-report a.icon-del,
    #project-report a.icon-copy,
    #project-report a.icon-add {
      @apply ml-3
    }

    // 各パネルの編集／セッティング／閉じるアイコン用（パネル内の別要素への影響がないかチェック）
    #content span span {
      @apply ml-1
    }
  }


  // Lychee Work Plan
  .controller-lychee_work_plan {
    #main.nosidebar {
      @apply ml-0
    }
  }


  // Lychee Time Management
  .controller-time_management {
    #main.nosidebar {
      @apply ml-0
    }

    main button {
      @apply px-1
    }
  }


  // Lychee ステータスカラー
  .controller-issue_statuses.controller-issue_statuses.action-index td.name {
    display: revert;
  }

  // Lychee Kanban
  .controller-kanban.controller-kanban {
    select, input {
      @apply h-auto
    }

    #content .tabs {
      @apply mb-1
    }

    .task-kanban-icon-fullscreen__start {
      background-image: url(images/fullscreen_success.svg);
      @apply mr-4
    }

    .task-kanban-icon-fullscreen__exit {
      background-image: url(images/close_fullscreen_default.svg);
      @apply mr-4
    }

    #burn_down_type_wrap {
      @apply static mt-2
    }
  }

  .controller-projects.controller-projects {
    #kanban.collapsible {
      @apply mb-6
    }

    #kanban.collapsible > legend, #backlog > legend {
      @apply mb-4
    }

    #kanban.collapsible input[type="checkbox"] {
      @apply mr-1
    }

    #kanban.collapsible input[type="checkbox"] + label {
      @apply mr-2
    }

    #kanban.collapsible .box ~ .box fieldset {
      @apply mt-4
    }

    #kanban.collapsible .box ~ .box fieldset legend + div {
      @apply pl-[14px]
    }

    #backlog.collapsible table td {
      @apply pt-3
    }

    #backlog.collapsible table tr:first-child td {
      @apply pt-0
    }

    #backlog.collapsible input[type="checkbox"] {
      @apply mr-1
    }

    #backlog.collapsible input[type="checkbox"] + label {
      @apply mr-2
    }

    #backlog.collapsible .box ~ .box fieldset {
      @apply mt-4
    }

    #backlog.collapsible .box ~ .box fieldset legend + div {
      @apply pl-[14px]
    }
  }

  .task-kanban-is-fullscreen #main {
    @apply ml-0
  }

  // Lychee Backlog
  .controller-backlog.controller-backlog {
    select, input {
      @apply h-auto
    }

    .velocity__container > div {
      @apply mt-4
    }

    .velocity__container > div input[type="number"] {
      @apply mt-2
    }

    .task-kanban-icon-fullscreen__start {
      background-image: url(images/fullscreen_success.svg);
      @apply mr-4
    }

    .task-kanban-icon-fullscreen__exit {
      background-image: url(images/close_fullscreen_default.svg);
      @apply mr-4
    }
  }

  // Lychee Gantt Chart
  .controller-lgc.controller-lgc {
    .lgc-tree {
      @apply pb-6
    }

    .lgc-issueDetail-header {
      @apply h-auto py-2
    }

    .lgc-form-fieldset__inlineBlock {
      @apply mb-1 pt-2 px-3 pb-3 rounded-md
    }

    .lgc-form-fieldset__inlineBlock ~ .lgc-form-fieldset__inlineBlock {
      @apply mr-1
    }

    .lgc-form-fieldset__inlineBlock label {
      @apply inline-flex items-center
    }

    .lgc-form-fieldset__inlineBlock label input[type="checkbox"] {
      @apply mr-1
    }

    .lgc-queryForm-dateRange {
      @apply text-xs
    }

    .lgc-queryForm-zoom-selection {
      @apply mt-4
    }

    .lgc-queryForm-zoom-selection li {
      @apply text-xs
    }

    .lgc-queryForm-zoom-selection li:not(:first-child) {
      @apply ml-0
    }

    .lgc-queryForm-zoom-selection li::before {
      @apply mr-1.5
    }

    .contextual .lgc-popover {
      @apply ml-0
    }

    .contextual .lgc-icon-fullscreen__start,
    .contextual .lgc-icon-fullscreen__exit {
      @apply ml-0
    }

    .lgc-separator__vertical {
      @apply mx-2
    }
  }

  .lgc-is-fullscreen #main {
    @apply ml-0
  }

  // Lychee Cost
  .lychee-cost-cash-forecast__unit-description {
    @apply top-4 right-4
  }

  .controller-lychee_cost_expenses.controller-lychee_cost_expenses {
    #month {
      @apply mr-1
    }

    #x_months {
      @apply w-[4.5rem] my-1
    }

    #content .total_amount {
      @apply text-sm text-left mt-2 mb-2
    }

    #content .total_amount .value {
      @apply text-xl
    }

    #lychee_cost_expense_amount {
      @apply mr-1
    }
  }

  // Cost Group
  .controller-cost_groups {
    h2 + .autoscroll {
      @apply clear-both mt-4
    }

    h2 + .nodata {
      @apply clear-both mt-4
    }
  }

  // Lychee Issue Sets
  .controller-lychee_issue_sets.controller-lychee_issue_sets {
    .issue-sets thead .checkbox + th {
      @apply text-left
    }

    .issue-sets .num-issue-templates {
      @apply w-28
    }

    .issue-sets .buttons {
      @apply w-8
    }
  }

  // Lychee Project Term
  .controller-projects.controller-projects {
    #lychee_project_term_controls {
      @apply mt-4
    }
  }

  // Lychee Custom Field
  .issue .attributes fieldset {
    @apply mt-4
  }

  .issue .attributes fieldset legend + div {
    @apply mt-2
  }

  .controller-custom_field_categories.controller-custom_field_categories {
    .custom-field-categories {
      @apply mt-4
    }
  }

  // Lychee Issue Sets
  .controller-lychee_issue_sets {
    .issue-set {
      @apply clear-both bg-status-warningLight border-border-divider mt-4 mb-2 p-4 rounded-md
    }

    .contextual + h3 {
      @apply mt-6
    }

    .issue-templates {
      @apply mt-2
    }

    // 新規作成・編集
    .new_lychee_issue_set,
    .edit_lychee_issue_set {
      .tabular p,
      #projects_issue_sets_attributes {
        @apply pl-[11rem]
      }

      .tabular label {
        @apply w-[10rem] -ml-[11rem]
      }

      #projects_issue_sets_attributes {
        ul {
          @apply mt-2
        }

        ul li {
          @apply mt-2
        }

        ul li label {
          @apply text-sm
        }
      }
    }
  }

  .controller-lychee_issue_templates {
    div.issue-template {
      @apply clear-both bg-background-secondary/20 border border-border-divider rounded-md mt-4 p-6
    }

    div.issue-template .subject:not(td) {
      @apply text-lg font-bold
    }

    div.issue-template .splitcontent .attribute {
      @apply overflow-hidden min-h-0 mb-2
    }

    div.issue-template .description {
      @apply mb-2
    }

    div.issue-template .issue_template_tree {
      @apply mb-2
    }

    #attributes {
      @apply mt-4
    }

    #attributes + .splitcontent {
      @apply mt-4
    }
  }

  .controller-issue_forms {
    #content h2 + p + p {
      @apply mt-4 mb-2
    }

    .issue-set {
      @apply bg-status-warningLight border-border-divider mb-2 p-4 rounded-md
    }

    .issue-form-table td {
      @apply text-xs
    }

    .issue-form-table {
      select {
        @apply text-xs py-1 pr-6 pl-2 my-0
      }

      select[multiple] {
        @apply px-1
      }

      input:not([type="checkbox"], [type="radio"], [type="submit"]),
      textarea {
        @apply text-xs py-1 px-2 my-0
      }
    }

    .issue-form-table + p {
      @apply mt-4
    }

    .issue-form-table + p + p {
      @apply my-2
    }

    label[for="fixed_version_id"],
    label[for="title"] {
      @apply inline-block w-28 font-bold
    }

    #content input[name="commit"] {
      @apply mt-4
    }
  }

  .controller-projects {
    #issue-set-setting-form input[name="commit"] {
      @apply my-2
    }
  }


  // Lychee Message Box
  .controller-lychee_message_box_informations.controller-lychee_message_box_informations,
  .controller-lychee_message_box_my_boxes.controller-lychee_message_box_my_boxes,
  .controller-lychee_message_box_system_errors.controller-lychee_message_box_system_errors {
    #content {
      @apply pt-[10px] px-0 pb-0
    }

    #main.nosidebar {
      @apply ml-0
    }

    .lychee-message-box-types > li.mark_as_read a {
      font-size: 12px;
    }

    .lychee-message-box-root {
      @apply border-x-0
    }

    .lychee-message-box-root.issue_update .balloon {
      @apply py-2 rounded-xl
    }

    .lychee-message-box-root.issue_update .balloon .details {
      @apply text-xs
    }

    .lychee-message-box-root.issue_update .note-all .details {
      @apply p-4 rounded-lg
    }

    .lychee-message-box-root.issue_update .note-details .details {
      @apply pl-0
    }

    .lychee-message-box-root.issue_update .details textarea {
      @apply h-[38px] border-border-default text-sm py-2 px-3 rounded-md
    }

    .lychee-message-box-root.issue_update .details input[type="submit"] {
      @apply h-[38px] text-sm py-2 px-3 rounded-md shadow hover:bg-product-hover hover:shadow-none active:bg-product-active active:shadow-none
    }
  }


  // Lychee ライセンス管理
  .controller-lychee_licenses.controller-lychee_licenses {
    #new_registration + hr + a {
      @apply inline-block mt-2
    }

    #new_registration table td {
      @apply p-2
    }
  }

  .controller-lychee_modules.controller-lychee_modules {
    .lychee-modules__projects {
      @apply ml-3
    }

    .lychee-modules__projects li {
      @apply mt-2
    }

    table.list.lychee-modules .name {
      @apply pl-4
    }

    .lychee-modules details {
      @apply cursor-pointer
    }

    .lychee-modules details summary {
      background-image: url(images/chevron_right_default.svg);
      @apply bg-[left_center] bg-no-repeat list-none pl-4
    }

    .lychee-modules details[open] summary {
      background-image: url(images/expand_more_default.svg);
    }
  }


  // Lychee Billing
  .controller-lychee_billing {
    #main.nosidebar {
      @apply ml-0
    }

    #header.aw_hasMainMenu {
      @apply pl-4
    }
  }


  // Lychee Log
  .controller-logs.controller-logs {
    .list td {
      @apply text-xs
    }

    .list td form {
      @apply inline
    }
  }


  // Lychee Rest Days 会社休日設定
  .controller-rest_days.controller-rest_days {
    .new_rest_day_csv {
      @apply mb-4
    }

    .new_rest_day_csv input[type="file"] {
      @apply max-w-none
    }

    .new_rest_day_csv input[name="commit"] {
      @apply mt-2
    }

    h4 {
      @apply mb-2
    }

    .new_rest_day_csv + div .box {
      @apply mb-0
    }

    #lychee_rest_day_day {
      @apply mr-4
    }
  }


  // Lychee SAML
  .controller-auth_source_saml.controller-auth_source_saml {
    .tabular p {
      @apply pl-[10rem]
    }

    .tabular label {
      @apply w-[9rem] -ml-[10rem]
    }

    td.buttons a:hover,
    td.buttons a:active {
      @apply bg-transparent border-0
    }

    td.buttons .icon-del {
      @apply ml-2
    }
  }

  #redirect_to_auth_request_box {
    @apply mt-4
  }


  // Lychee CCPM
  .controller-projects.controller-projects {
    #ccpm_version_settings p {
      @apply border-solid border-b border-border-divider mt-0 mb-6 pb-6
    }

    #ccpm_version_settings legend + p {
      @apply border-0 mt-0 mb-4 pb-0
    }

    #ccpm_version_settings p:last-child {
      @apply border-0 mb-0 pb-0
    }
  }


  // Lychee Checklist
  .controller-issues.action-new {
    #checklist_for_new {
      @apply flex-col
    }

    #checklist_for_new > label {
      @apply justify-start  mt-0 mx-0 mb-2 pl-0
    }

    #checklist_for_new > #checklist_wrapper {
      @apply ml-0
    }
  }

  // Lychee Project Template
  .controller-projects {
    #new_project .label_base_date_start_date {
      @apply mr-2
    }

    #new_project #project_start_date {
      @apply mt-2
    }
  }

  // Lychee Project Report
  .controller-project_report_settings,
  .controller-indice_settings,
  .controller-enabled_report_indice_settings {
    table.list:not(.odd-even) tbody tr:nth-child(odd) td {
      @apply bg-background-primary
    }

    table.list tbody tr:hover > td {
      background-color: #f6f7f8 !important;
    }
  }

  .controller-indice_settings {
    .contextual + h3 + .contextual {
      @apply mb-2
    }
  }


  // Lychee Issue Form
  .lychee-issue-form__container_full,
  .lychee-issue-form__container_half {
    #dialog-content-column-single {
      @apply p-3
    }

    #tab-buttons {
      @apply pb-4
    }

    .required {
      @apply pl-1
    }

    #dialog-content-header {
      @apply h-[102px]
    }

    #dialog-content-header h4 .show,
    #lif-issue_subject,
    .fields .attribute dd .show,
    .lif-description .text .show,
    .date-fields dl dd .issue-item .show {
      @apply border border-transparent text-sm my-[1px] py-1.5 px-3 rounded-md
    }

    #tab-property .show {
      @apply min-h-[34px]
    }

    #tab-property .estimated-hours .show,
    #tab-property .remaining-estimate .show,
    #tab-property .done-ratio .show {
      @apply min-h-0
    }

    #dialog-content-header h4 {
      @apply mb-1
    }

    #dialog-content-header h4 .issue-item {
      @apply ml-1
    }

    #dialog-content-header h4 .show:hover,
    #dialog-content-header h3 .show:hover {
      @apply bg-background-secondary
    }

    #dialog-content-header h3 {
      @apply mb-0
    }

    .lif-description .header .left H5 {
      @apply font-bold
    }

    .fields {
      @apply mt-4
    }

    .fields dl dt {
      @apply pr-2
    }

    .fields .attribute,
    .tab-content-time_entries-form .attribute {
      @apply mt-1
    }

    .fields .attribute dd .edit > select,
    .fields .attribute dd .edit > input {
      @apply my-0
    }

    .date-fields {
      @apply border-border-divider mt-4 pb-4
    }

    .date-fields .edit input {
      @apply w-[140px] text-sm py-1.5 px-3 rounded-md
    }

    .horizon-fields {
      @apply flex flex-wrap gap-4 border-border-divider mt-4 pb-4
    }

    .horizon-fields .edit input {
      @apply text-sm py-1.5 px-3 rounded-md
    }

    .fields.attachment_files {
      @apply border-border-divider mt-4 pb-4
    }

    .fields.attachment_files #file-input {
      @apply hidden
    }

    .tab-content .add-file,
    .attachment_files .add-file {
      @apply border border-background-secondary my-1 hover:border-border-default active:border-border-divider active:bg-background-tertiary
    }

    .tab-content .add-file .label,
    .attachment_files .add-file .label {
      @apply h-auto py-2 px-3 rounded-md
    }

    .tab-content .item .avatar {
      @apply mr-2
    }

    .tab-content #tab-content-comments_and_journals .notify .label {
      @apply h-auto border border-background-secondary py-2 px-3 rounded-md hover:border-border-default active:border-border-divider active:bg-background-secondary
    }

    .tab-content #tab-content-comments_and_journals .controls {
      @apply mt-4
    }

    .tab-content-time_entries-form .time-entry-form-spent-on {
      @apply mt-0
    }

    .tab-content .item .meta,
    .tab-content .item .details,
    #tab-content-time_entries .notes > *,
    .tab-content .item .private-notes .wiki {
      width: calc(100% - 32px);
    }

    .tab-content .item .meta .context-menus {
      @apply mr-1
    }

    .tab-content .item .item-date {
      @apply text-text-caption text-xs mt-1
    }

    .tab-content .total .value {
      @apply mr-2
    }

    // context menu
    #popup ul,
    .popup-ticket-context ul,
    .popup-journal-context ul {
      @apply p-1
    }

    #popup ul li,
    .popup-ticket-context ul li,
    .popup-journal-context ul li {
      @apply p-0
    }

    .popup-ticket-context ul li:not(:first-child),
    .popup-journal-context ul li:not(:first-child) {
      @apply mt-0.5
    }

    #popup ul li button,
    .popup-ticket-context ul li button,
    .popup-journal-context ul li button {
      @apply items-center text-sm mx-0 py-2 px-3 rounded hover:bg-background-secondary hover:font-normal active:bg-background-tertiary
    }
  }

  // その他
  .controller-projects.controller-projects {
    table.list:not(.odd-even) tbody tr:nth-child(odd) td {
      @apply bg-background-primary
    }
  }
}